[General]
network = SomeIp_Qos_Small

[Config Z_SDConfigs]

[Config SmallEvalCase]
extends = Z_SDConfigs

SomeIp_Qos_Small.linkspeed = 100Mbps

**.N[0].numServices = 1
**.N[0].services[0].typename = "Publisher"
**.N[0].services[0].serviceName = "F0"
**.N[0].services[0].serviceId = 0
**.N[0].services[0].mcastDestAddress = "225.0.1.10"
**.N[0].services[0].intervalMin = 1ms
**.N[0].services[0].payloadMax = 1522B - 74B # all headers up to someip 74B
**.N[0].services[0].vlan_id = 0
**.N[0].services[0].pcp = 7
**.N[0].services[0].startTime = 0.01s

**.N[2].numServices = 1
**.N[2].services[0].typename = "Subscriber"
**.N[2].services[0].serviceName = "F0"
**.N[2].services[0].serviceId = 0
**.N[2].services[0].deadline = 5ms
**.N[2].services[0].startTime = 0.02s

## precisely timed cross traffic
**.N[0].numApps = 1
**.N[0].app[0].typename = "BGTrafficSourceApp"
**.N[0].app[0].destAddress = "0A-0B-0C-01-00-20"
**.N[0].app[0].payload = intWithUnit(uniform(1500Byte, 1500Byte))
**.N[0].app[0].sendInterval = uniform(300us, 700us)
**.N[0].app[0].startTime = 0.022s

**.N[1].numApps = 1
**.N[1].app[0].typename = "BGTrafficSourceApp"
**.N[1].app[0].destAddress = "0A-0B-0C-01-00-20"
**.N[1].app[0].payload = intWithUnit(uniform(1500Byte, 1500Byte))
**.N[1].app[0].sendInterval = uniform(300us, 700us)
**.N[1].app[0].startTime = 0.022128s

**.CT[0].numApps = 1
**.CT[0].app[0].typename = "BGTrafficSourceApp"
**.CT[0].app[0].destAddress = "0A-0B-0C-01-00-20"
**.CT[0].app[0].payload = intWithUnit(uniform(1500Byte, 1500Byte))
**.CT[0].app[0].sendInterval = uniform(300us, 700us)
**.CT[0].app[0].startTime = 0.021999s

**.CT[1].numApps = 1
**.CT[1].app[0].typename = "BGTrafficSourceApp"
**.CT[1].app[0].destAddress = "0A-0B-0C-01-00-20"
**.CT[1].app[0].payload = intWithUnit(uniform(1500Byte, 1500Byte))
**.CT[1].app[0].sendInterval = uniform(300us, 700us)
**.CT[1].app[0].startTime = 0.022257s

**.N[2].numApps = 1
**.N[2].app[0].typename = "BGTrafficSinkApp"
#**.N[2].app[0].srcAddress = ""
**.N[2].app[0].replyFirst = false
**.N[2].bgIn[0].destination_gates = "app[0].in"

**.controllerApps[2].reserveResources = true
**.controllerApps[2].streamIntervalAsCMI = true
**.S[*].etherMAC[*].shaper.transmissionSelectionAlgorithm[7].typename = "CreditBasedShaper"
**.S[*].etherMAC[*].shaper.transmissionSelectionAlgorithm[6].typename = "CreditBasedShaper"
**.S[*].etherMAC[*].shaper.transmissionSelectionAlgorithm[5].typename = "CreditBasedShaper"

**.N[*].eth[*].shaper.queueing.defaultPcpOnly = false
**.N[*].eth[*].shaper.numPCP = 8
**.N[*].eth[*].shaper.transmissionSelectionAlgorithm[7].typename = "CreditBasedShaper"
**.N[*].eth[*].shaper.transmissionSelectionAlgorithm[6].typename = "CreditBasedShaper"
**.N[*].eth[*].shaper.transmissionSelectionAlgorithm[5].typename = "CreditBasedShaper"
**.middleware.sm.registerStreams = true
**.middleware.sm.advertiseStreamRegistration = false

**.S[*].relayUnit.configXML = xmldoc("small_eval_case_flowtables.xml")

[Config SmallEvalCase_NoSourceCT]
extends = SmallEvalCase
**.N[0].numApps = 0
**.CT[0].app[0].startTime = 0.021999s
**.N[1].app[0].startTime = 0.022128s
**.CT[1].app[0].startTime = 0.022257s

[Config SmallEvalCase_ReducedPayload]
extends = SmallEvalCase
**.N[0].services[0].payloadMax = 750B - 74B # all headers up to someip 74B

[Config SmallEvalCase_ReducedPayload_NoSourceCT]
extends = SmallEvalCase_ReducedPayload
**.N[0].numApps = 0
**.CT[0].app[0].startTime = 0.021937s
**.N[1].app[0].startTime = 0.022005s
**.CT[1].app[0].startTime = 0.022073s

[Config SmallEvalCase_FixedCMI]
extends = SmallEvalCase
**.controllerApps[2].streamIntervalAsCMI = false
**.controllerApps[2].pcpCMI = {7:125us} 

[Config SmallEvalCase_FixedCMI_NoSourceCT]
extends = SmallEvalCase_NoSourceCT
**.controllerApps[2].streamIntervalAsCMI = false
**.controllerApps[2].pcpCMI = {7:125us} 

[Config SmallEvalCase_ReducedPayload_FixedCMI]
extends = SmallEvalCase_ReducedPayload
**.controllerApps[2].streamIntervalAsCMI = false
**.controllerApps[2].pcpCMI = {7:125us} 

[Config SmallEvalCase_ReducedPayload_FixedCMI_NoSourceCT]
extends = SmallEvalCase_ReducedPayload_NoSourceCT
**.controllerApps[2].streamIntervalAsCMI = false
**.controllerApps[2].pcpCMI = {7:125us} 

[Config SmallEvalCase_ReducedPayload_NC]
extends = SmallEvalCase_ReducedPayload
**.controllerApps[2].configXML = xmldoc("small_eval_case_reducedpayload_controllerconfig.xml")
**.controllerApps[2].useXMLReservationList = true

[Config SmallEvalCase_ReducedPayload_NC_NoSourceCT]
extends = SmallEvalCase_ReducedPayload_NoSourceCT
**.controllerApps[2].configXML = xmldoc("small_eval_case_reducedpayload_controllerconfig.xml")
**.controllerApps[2].useXMLReservationList = true

[Config SmallEvalCase_ReducedPayload_NC_MinIdleSlopes]
extends = SmallEvalCase_ReducedPayload_NC
**.controllerApps[2].configXML = xmldoc("small_eval_case_reducedpayload_controllerconfig_nc_min.xml")

[Config SmallEvalCase_ReducedPayload_NC_MinIdleSlopes_NoSourceCT]
extends = SmallEvalCase_ReducedPayload_NC_NoSourceCT
**.controllerApps[2].configXML = xmldoc("small_eval_case_reducedpayload_controllerconfig_nc_min.xml")



[Config Z_VerifyMaxLatency]
**.controllerApps[2].verifyMaxLatencies = true
**.controllerApps[2].portTransmitRate = 100Mbps
**.controllerApps[2].dumpFlowUpdatesToFile = "flowUpdates.json"

[Config SmallEvalCase_ReducedPayload_NoSourceCT_VerifyLatency]
extends = SmallEvalCase_ReducedPayload_NoSourceCT, Z_VerifyMaxLatency

[Config SmallEvalCase_ReducedPayload_FixedCMI_NoSourceCT_VerifyLatency]
extends = SmallEvalCase_ReducedPayload_FixedCMI_NoSourceCT, Z_VerifyMaxLatency
